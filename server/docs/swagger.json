{
    "swagger": "2.0",
    "info": {
        "description": "Server API e Websocket per il progetto HermesChat. Il server è stato sviluppato in Go con il framework Gin e utilizza MongoDB come database.",
        "title": "HermesChat API",
        "contact": {},
        "version": "1.0"
    },
    "host": "api.hermeschat.it:8090",
    "basePath": "/",
    "paths": {
        "/acceptFriend": {
            "post": {
                "description": "Accetta la richiesta di amicizia dell'utente loggato con l'utente passato come parametro",
                "produces": [
                    "application/json"
                ],
                "summary": "Accetta richiesta di amicizia",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Indice dell'utente da accettare",
                        "name": "idUser",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Nickname dell'utente da accettare",
                        "name": "nickname",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Nome dell'utente da accettare",
                        "name": "name",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Cognome dell'utente da accettare",
                        "name": "surname",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Immagine dell'utente da accettare",
                        "name": "image",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/addCalendarEvent": {
            "post": {
                "description": "Aggiunge un evento al calendario dell'utente loggato (nel caso di evento condiviso, aggiunge anche l'evento al calendario degli utenti con cui è condiviso)",
                "produces": [
                    "application/json"
                ],
                "summary": "Aggiunge un evento al calendario",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Titolo dell'evento",
                        "name": "title",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Descrizione dell'evento",
                        "name": "description",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Data dell'evento",
                        "name": "date",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Id dell'utente che ha creato l'evento",
                        "name": "idUser",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Notifica dell'evento",
                        "name": "notify",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Shared or Personal",
                        "name": "type",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Tempo di notifica",
                        "name": "notifyTime",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Colore dell'evento",
                        "name": "color",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "Id delle chat con cui è condiviso l'evento (se type è Shared)",
                        "name": "idChats",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/blockUser": {
            "post": {
                "description": "Blocca l'utente passato come parametro dall'utente loggato",
                "produces": [
                    "application/json"
                ],
                "summary": "Blocca utente",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Username dell'utente da bloccare",
                        "name": "username",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/checkOtp": {
            "post": {
                "description": "Verifica che l'OTP inserito dall'utente sia lo stesso generato dal server e inviato via email",
                "produces": [
                    "application/json"
                ],
                "summary": "Verifica OTP",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente da verificare",
                        "name": "id",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "OTP inserito dall'utente",
                        "name": "otp",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/createChat": {
            "post": {
                "description": "Crea una chat tra due utenti",
                "produces": [
                    "application/json"
                ],
                "summary": "Crea una chat",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Id dell'utente con cui creare la chat",
                        "name": "idUser",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "file",
                        "description": "Immagine dell'utente loggato",
                        "name": "img",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "file",
                        "description": "Immagine dell'utente con cui creare la chat",
                        "name": "friendImg",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/declineFriend": {
            "post": {
                "description": "Rifiuta la richiesta di amicizia dell'utente loggato con l'utente passato come parametro",
                "produces": [
                    "application/json"
                ],
                "summary": "Rifiuta richiesta di amicizia",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Indice dell'utente da rifiutare",
                        "name": "idUser",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/getBlocked": {
            "post": {
                "description": "Restituisce tutti gli utenti bloccati dall'utente loggato",
                "produces": [
                    "application/json"
                ],
                "summary": "Ricerca utenti bloccati",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/getCalendarEvents": {
            "post": {
                "description": "Restituisce tutti gli eventi del calendario dell'utente loggato (sia personali che condivisi)",
                "produces": [
                    "application/json"
                ],
                "summary": "Ottiene eventi del calendario",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/getChats": {
            "post": {
                "description": "Restituisce tutte le chat dell'utente loggato",
                "produces": [
                    "application/json"
                ],
                "summary": "Ottieni chat",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/getFiles": {
            "post": {
                "description": "Scarica i file dagli url specificati e li invia al client",
                "produces": [
                    "application/json"
                ],
                "summary": "Scarica i file",
                "parameters": [
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "Url dei file da scaricare",
                        "name": "urls",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "ChatId delle chat in cui si trovano i file",
                        "name": "chatId",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/getFriendRequests": {
            "post": {
                "description": "Restituisce tutti le richieste di amicizia dell'utente loggato",
                "produces": [
                    "application/json"
                ],
                "summary": "Ricerca richieste di amicizia utente",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/getFriends": {
            "post": {
                "description": "Restituisce tutti gli amici dell'utente loggato",
                "produces": [
                    "application/json"
                ],
                "summary": "Ricerca amici utente",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/getInfoUser": {
            "post": {
                "description": "Restituisce le informazioni dell'utente loggato",
                "produces": [
                    "application/json"
                ],
                "summary": "Informazioni utente",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/getMessages": {
            "post": {
                "description": "Restituisce offset * 50 messaggi della chat selezionata",
                "produces": [
                    "application/json"
                ],
                "summary": "Ottieni messaggi",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Id della chat selezionata",
                        "name": "idChat",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Offset dei messaggi da restituire",
                        "name": "offset",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/getRequestSent": {
            "post": {
                "description": "Restituisce tutti le richieste di amicizia inviate dell'utente loggato",
                "produces": [
                    "application/json"
                ],
                "summary": "Ricerca richieste di amicizia inviate",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/login": {
            "post": {
                "description": "Effettua il login di un utente e crea un token JWT salvato in un cookie http-only",
                "produces": [
                    "application/json"
                ],
                "summary": "Login utente",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Username dell'utente",
                        "name": "username",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Password dell'utente",
                        "name": "password",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/searchUsers": {
            "get": {
                "description": "Cerca fino a 100 utenti con username che inizia con la stringa passata come parametro",
                "produces": [
                    "application/json"
                ],
                "summary": "Ricerca utenti",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Caratteri con cui inizia l'username",
                        "name": "username",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/sendFile": {
            "post": {
                "description": "Salva il file nella cartella del server dell'utente loggato e invia il file all'utente specificato",
                "produces": [
                    "application/json"
                ],
                "summary": "Invia un file",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Username dell'utente a cui inviare il file",
                        "name": "username",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "file",
                        "description": "File da inviare",
                        "name": "file",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/sendFriendRequest": {
            "post": {
                "description": "Invia una richiesta di amicizia all'utente specificato dall'utente loggato",
                "produces": [
                    "application/json"
                ],
                "summary": "Invia richiesta di amicizia",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Username dell'utente a cui inviare la richiesta di amicizia",
                        "name": "username",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/signup": {
            "post": {
                "description": "Effettua la registrazione di un utente e crea un codice OTP che verrà inviato via email",
                "produces": [
                    "application/json"
                ],
                "summary": "Registrazione di un utente",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Username dell'utente",
                        "name": "username",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Password dell'utente",
                        "name": "password",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Email dell'utente",
                        "name": "email",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/socket": {
            "get": {
                "description": "Permette di connettersi al socket realizzato con libreria Gorilla Websocket",
                "produces": [
                    "application/json"
                ],
                "summary": "Connessione al socket",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente",
                        "name": "index",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            }
        },
        "/updateCalendarEvent": {
            "patch": {
                "description": "Modifica un evento del calendario dell'utente loggato (nel caso di evento condiviso, modifica anche l'evento al calendario degli utenti con cui è condiviso)",
                "produces": [
                    "application/json"
                ],
                "summary": "Modifica un evento del calendario",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Id dell'evento da modificare",
                        "name": "idEvent",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Titolo dell'evento",
                        "name": "title",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Descrizione dell'evento",
                        "name": "description",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Data dell'evento",
                        "name": "date",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Notifica dell'evento",
                        "name": "notify",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Shared or Personal",
                        "name": "type",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Tempo di notifica",
                        "name": "notifyTime",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Colore dell'evento",
                        "name": "color",
                        "in": "header"
                    },
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "Id delle chat con cui è condiviso l'evento (se type è Shared)",
                        "name": "idChats",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/updateInfo": {
            "patch": {
                "description": "Aggiorna lo \"stato\" dell'utente loggato",
                "produces": [
                    "application/json"
                ],
                "summary": "Aggiorna informazioni utente",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Nuove informazioni da aggiornare",
                        "name": "newInfo",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Indice dell'utente loggato",
                        "name": "index",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        }
    }
}